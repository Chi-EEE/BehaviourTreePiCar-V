\hypertarget{SucceedOnAnyNearbyScan_8hpp_source}{}\doxysection{Succeed\+On\+Any\+Nearby\+Scan.\+hpp}
\label{SucceedOnAnyNearbyScan_8hpp_source}\index{behaviour\_tree\_car/include/behaviour\_tree/node/custom/condition/SucceedOnAnyNearbyScan.hpp@{behaviour\_tree\_car/include/behaviour\_tree/node/custom/condition/SucceedOnAnyNearbyScan.hpp}}
\mbox{\hyperlink{SucceedOnAnyNearbyScan_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef BEHAVIOUR\_TREE\_SUCCEED\_ON\_AVERAGE\_ANY\_SCAN\_HPP}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define BEHAVIOUR\_TREE\_SUCCEED\_ON\_AVERAGE\_ANY\_SCAN\_HPP}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{CustomNode_8hpp}{behaviour\_tree/node/custom/CustomNode.hpp}}"{}}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Context_8h}{behaviour\_tree/Context.h}}"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#ifndef BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}behaviour\_tree/CarContext.hpp"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <spdlog/spdlog.h>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{distance_8h}{behaviour\_tree/global/distance.h}}"{}}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1condition}{behaviour\_tree::node::custom::condition}}}
\DoxyCodeLine{17 \{}
\DoxyCodeLine{18     \textcolor{keyword}{class }\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan}{SucceedOnAnyNearbyScan}} final : \textcolor{keyword}{public} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1CustomNode}{CustomNode}}}
\DoxyCodeLine{19     \{}
\DoxyCodeLine{20     \textcolor{keyword}{public}:}
\DoxyCodeLine{21         \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a275537d16a77067f3c2b06f663667d36}{SucceedOnAnyNearbyScan}}(\textcolor{keyword}{const} std::string \&\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}}, \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}}, \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}}, \textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}}) : \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1CustomNode}{CustomNode}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}}),}
\DoxyCodeLine{22                                                                                                                      \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}}),}
\DoxyCodeLine{23                                                                                                                      \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}}),}
\DoxyCodeLine{24                                                                                                                      \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}}),}
\DoxyCodeLine{25                                                                                                                      \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a09b204009e015b46146663e6fa0524bf}{minimum\_distance\_unit}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}} * global::CM\_TO\_DISTANCE)}
\DoxyCodeLine{26         \{}
\DoxyCodeLine{27         \}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29         \textcolor{keyword}{const} \textcolor{keyword}{static} tl::expected<std::shared\_ptr<SucceedOnAnyNearbyScan>, std::string> \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_afe10898f604269afe376c1283a45d2fc}{parse}}(\textcolor{keyword}{const} pugi::xml\_node \&node, \textcolor{keyword}{const} \textcolor{keywordtype}{int} index, \textcolor{keyword}{const} std::string \&name\_attribute)}
\DoxyCodeLine{30         \{}
\DoxyCodeLine{31             \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}} = node.attribute(\textcolor{stringliteral}{"{}min\_angle"{}}).as\_int();}
\DoxyCodeLine{32             \textcolor{keywordflow}{if} (min\_angle < 0 || min\_angle > 360)}
\DoxyCodeLine{33             \{}
\DoxyCodeLine{34                 \textcolor{keywordflow}{return} tl::unexpected(fmt::format(R\textcolor{stringliteral}{"{}(Invalid min\_angle: '\{\}' | Condition:SucceedOnAnyNearbyScan:['\{\}',\{\}])"{}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}}, name\_attribute, index));}}
\DoxyCodeLine{35 \textcolor{stringliteral}{            \}}}
\DoxyCodeLine{36 \textcolor{stringliteral}{            }\textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}} = node.attribute(\textcolor{stringliteral}{"{}max\_angle"{}}).as\_int();}
\DoxyCodeLine{37             \textcolor{keywordflow}{if} (max\_angle < 0 || max\_angle > 360)}
\DoxyCodeLine{38             \{}
\DoxyCodeLine{39                 \textcolor{keywordflow}{return} tl::unexpected(fmt::format(R\textcolor{stringliteral}{"{}(Invalid max\_angle: '\{\}' | Condition:SucceedOnAnyNearbyScan:['\{\}',\{\}])"{}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}}, name\_attribute, index));}}
\DoxyCodeLine{40 \textcolor{stringliteral}{            \}}}
\DoxyCodeLine{41 \textcolor{stringliteral}{            }\textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}} = node.attribute(\textcolor{stringliteral}{"{}cm"{}}).as\_double();}
\DoxyCodeLine{42             \textcolor{keywordflow}{if} (\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}} < 0)}
\DoxyCodeLine{43             \{}
\DoxyCodeLine{44                 \textcolor{keywordflow}{return} tl::unexpected(fmt::format(R\textcolor{stringliteral}{"{}(Invalid cm: '\{\}' | Condition:SucceedOnAnyNearbyScan:['\{\}',\{\}])"{}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}}, name\_attribute, index));}}
\DoxyCodeLine{45 \textcolor{stringliteral}{            \}}}
\DoxyCodeLine{46 \textcolor{stringliteral}{            }\textcolor{keywordflow}{return} std::make\_shared<SucceedOnAnyNearbyScan>(}
\DoxyCodeLine{47                 \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan}{SucceedOnAnyNearbyScan}}(}
\DoxyCodeLine{48                     name\_attribute,}
\DoxyCodeLine{49                     \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}},}
\DoxyCodeLine{50                     \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}},}
\DoxyCodeLine{51                     \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}}));}
\DoxyCodeLine{52         \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54         \textcolor{keyword}{const} \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997}{Status}} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a69784697b33c62747f2f390632a6e584}{run}}(\textcolor{keyword}{const} \textcolor{keywordtype}{int} tick\_count, std::shared\_ptr<Context> context) \textcolor{keyword}{final} \textcolor{keyword}{override}}
\DoxyCodeLine{55         \{}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#ifndef BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{57             std::shared\_ptr<CarContext> car\_context = std::dynamic\_pointer\_cast<CarContext>(context);}
\DoxyCodeLine{58             \textcolor{keyword}{auto} car\_system = car\_context-\/>getCarSystem();}
\DoxyCodeLine{59             std::vector<Measure> scan\_data = car\_system-\/>getDeviceManager()-\/>getLidarDevice()-\/>getScanData();}
\DoxyCodeLine{60             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&measure : scan\_data)}
\DoxyCodeLine{61             \{}
\DoxyCodeLine{62                 \textcolor{keywordflow}{if} (measure.angle > this-\/>getMinAngle() \&\& measure.angle < this-\/>getMaxAngle())}
\DoxyCodeLine{63                 \{}
\DoxyCodeLine{64                     \textcolor{keywordflow}{if} (measure.distance < this-\/>getMinimumDistanceUnit())}
\DoxyCodeLine{65                     \{}
\DoxyCodeLine{66                         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997a505a83f220c02df2f85c3810cd9ceb38}{Status::Success}};}
\DoxyCodeLine{67                     \}}
\DoxyCodeLine{68                 \}}
\DoxyCodeLine{69             \}}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{71             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997ae139a585510a502bbf1841cf589f5086}{Status::Failure}};}
\DoxyCodeLine{72         \}}
\DoxyCodeLine{73 }
\DoxyCodeLine{74         \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a9cdf3498af070bd4a15e2b95b2dbbb9f}{getMinAngle}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{75 \textcolor{keyword}{        }\{}
\DoxyCodeLine{76             \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}};}
\DoxyCodeLine{77         \}}
\DoxyCodeLine{78 }
\DoxyCodeLine{79         \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a328eb1cc8d779c72bc5951031d7fa4d8}{getMaxAngle}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{80 \textcolor{keyword}{        }\{}
\DoxyCodeLine{81             \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}};}
\DoxyCodeLine{82         \}}
\DoxyCodeLine{83 }
\DoxyCodeLine{84         \textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_ae74e2bc9ed1e0a0028e4b90050092e69}{getMinimumDistanceUnit}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{85 \textcolor{keyword}{        }\{}
\DoxyCodeLine{86             \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a09b204009e015b46146663e6fa0524bf}{minimum\_distance\_unit}};}
\DoxyCodeLine{87         \}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89         \textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_aaec65a70a99b32a3a3aabc19b43b2b9d}{getCentimeters}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{90 \textcolor{keyword}{        }\{}
\DoxyCodeLine{91             \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}};}
\DoxyCodeLine{92         \}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94         \textcolor{keyword}{const} std::string \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_ae7a8119daf0ade2658c886c7491205ae}{toString}}() const final\textcolor{keyword}{ override}}
\DoxyCodeLine{95 \textcolor{keyword}{        }\{}
\DoxyCodeLine{96             \textcolor{keyword}{const} std::string \&\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}} = this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_ad9b3324377c0a8e45bf05999664aa263}{getName}}();}
\DoxyCodeLine{97             \textcolor{keywordflow}{if} (name != \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{98                 \textcolor{keywordflow}{return} fmt::format(R\textcolor{stringliteral}{"{}(<Condition:SucceedOnAnyNearbyScan name='\{\}' min\_angle='\{\}' max\_angle='\{\}' cm='\{\}'/>)"{}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}}, this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a9cdf3498af070bd4a15e2b95b2dbbb9f}{getMinAngle}}(), this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a328eb1cc8d779c72bc5951031d7fa4d8}{getMaxAngle}}(), this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_aaec65a70a99b32a3a3aabc19b43b2b9d}{getCentimeters}}());}}
\DoxyCodeLine{99 \textcolor{stringliteral}{            }\textcolor{keywordflow}{else}}
\DoxyCodeLine{100                 \textcolor{keywordflow}{return} fmt::format(R\textcolor{stringliteral}{"{}(<Condition:SucceedOnAnyNearbyScan min\_angle='\{\}' max\_angle='\{\}' cm='\{\}'/>)"{}, this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a9cdf3498af070bd4a15e2b95b2dbbb9f}{getMinAngle}}(), this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a328eb1cc8d779c72bc5951031d7fa4d8}{getMaxAngle}}(), this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_aaec65a70a99b32a3a3aabc19b43b2b9d}{getCentimeters}}());}}
\DoxyCodeLine{101 \textcolor{stringliteral}{        \}}}
\DoxyCodeLine{102 \textcolor{stringliteral}{}}
\DoxyCodeLine{103 \textcolor{stringliteral}{    }\textcolor{keyword}{private}:}
\DoxyCodeLine{104         \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a1ea09b8a836df8530d5328a3200d3c21}{min\_angle}};}
\DoxyCodeLine{105         \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a5bdc28442cfc67303ebb960f9e23a540}{max\_angle}};}
\DoxyCodeLine{106 }
\DoxyCodeLine{107         \textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_adf6492aef5606911a24a1fbe2e123938}{cm}};}
\DoxyCodeLine{108 }
\DoxyCodeLine{109         \textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1condition_1_1SucceedOnAnyNearbyScan_a09b204009e015b46146663e6fa0524bf}{minimum\_distance\_unit}};}
\DoxyCodeLine{110     \};}
\DoxyCodeLine{111 \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
