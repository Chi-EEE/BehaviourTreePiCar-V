\hypertarget{SetAngle_8hpp_source}{}\doxysection{Set\+Angle.\+hpp}
\label{SetAngle_8hpp_source}\index{behaviour\_tree\_car/include/behaviour\_tree/node/custom/action/SetAngle.hpp@{behaviour\_tree\_car/include/behaviour\_tree/node/custom/action/SetAngle.hpp}}
\mbox{\hyperlink{SetAngle_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef BEHAVIOUR\_TREE\_SETANGLE\_HPP}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define BEHAVIOUR\_TREE\_SETANGLE\_HPP}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{CustomNode_8hpp}{behaviour\_tree/node/custom/CustomNode.hpp}}"{}}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Context_8h}{behaviour\_tree/Context.h}}"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#ifndef BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}behaviour\_tree/CarContext.hpp"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{ServoType_8hpp}{enum/ServoType.hpp}}"{}}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action}{behaviour\_tree::node::custom::action}}}
\DoxyCodeLine{16 \{}
\DoxyCodeLine{17     \textcolor{keyword}{class }\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle}{SetAngle}} final : \textcolor{keyword}{public} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1CustomNode}{CustomNode}}}
\DoxyCodeLine{18     \{}
\DoxyCodeLine{19     \textcolor{keyword}{public}:}
\DoxyCodeLine{20         \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a324b6e8caf2c285e4613d6beb930e39e}{SetAngle}}(\textcolor{keyword}{const} std::string \&\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}}, \textcolor{keyword}{const} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efc}{ServoType}} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}}, \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}}) : \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1CustomNode}{CustomNode}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}}), \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}}), \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}}(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}})}
\DoxyCodeLine{21         \{}
\DoxyCodeLine{22         \}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24         \textcolor{keyword}{const} \textcolor{keyword}{static} tl::expected<std::shared\_ptr<SetAngle>, std::string> \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_ae9b300532815161cacc8e730b999d685}{parse}}(\textcolor{keyword}{const} pugi::xml\_node \&node, \textcolor{keyword}{const} \textcolor{keywordtype}{int} index, \textcolor{keyword}{const} std::string \&name\_attribute)}
\DoxyCodeLine{25         \{}
\DoxyCodeLine{26             \textcolor{keyword}{const} tl::expected<ServoType, std::string> maybe\_servo\_type = [\&]()}
\DoxyCodeLine{27             \{}
\DoxyCodeLine{28                 \textcolor{keyword}{const} std::string servo\_type\_attribute = node.attribute(\textcolor{stringliteral}{"{}servo\_type"{}}).as\_string();}
\DoxyCodeLine{29                 tl::expected<ServoType, std::string> result;}
\DoxyCodeLine{30                 \textcolor{keywordflow}{switch} (utils::hash(servo\_type\_attribute))}
\DoxyCodeLine{31                 \{}
\DoxyCodeLine{32                 \textcolor{keywordflow}{case} utils::hash(\textcolor{stringliteral}{"{}FrontWheels"{}}):}
\DoxyCodeLine{33                 \{}
\DoxyCodeLine{34                     result = \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca93335b362c90016c279a0b085ec76f17}{ServoType::FrontWheels}};}
\DoxyCodeLine{35                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{36                 \}}
\DoxyCodeLine{37                 \textcolor{keywordflow}{case} utils::hash(\textcolor{stringliteral}{"{}CameraServo1"{}}):}
\DoxyCodeLine{38                 \{}
\DoxyCodeLine{39                     result = \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca89f9a720d0b6ba4a7076563014a54114}{ServoType::CameraServo1}};}
\DoxyCodeLine{40                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{41                 \}}
\DoxyCodeLine{42                 \textcolor{keywordflow}{case} utils::hash(\textcolor{stringliteral}{"{}CameraServo2"{}}):}
\DoxyCodeLine{43                 \{}
\DoxyCodeLine{44                     result = \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca7a1697358e3c45b88123b709e9bd572f}{ServoType::CameraServo2}};}
\DoxyCodeLine{45                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{46                 \}}
\DoxyCodeLine{47                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{48                 \{}
\DoxyCodeLine{49                     result = tl::unexpected(fmt::format(R\textcolor{stringliteral}{"{}(Invalid servo\_type: '\{\}' | Action:SetAngle:['\{\}',\{\}])"{}, servo\_type\_attribute, name\_attribute, index));}}
\DoxyCodeLine{50 \textcolor{stringliteral}{                \}}}
\DoxyCodeLine{51 \textcolor{stringliteral}{                \};}}
\DoxyCodeLine{52 \textcolor{stringliteral}{                }\textcolor{keywordflow}{return} result;}
\DoxyCodeLine{53             \}();}
\DoxyCodeLine{54             \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}} = node.attribute(\textcolor{stringliteral}{"{}angle"{}}).as\_int();}
\DoxyCodeLine{55             \textcolor{keywordflow}{if} (angle < 0 || angle > 180)}
\DoxyCodeLine{56             \{}
\DoxyCodeLine{57                 \textcolor{keywordflow}{return} tl::unexpected(fmt::format(R\textcolor{stringliteral}{"{}(Invalid angle: '\{\}' | Action:SetAngle:['\{\}',\{\}])"{}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}}, name\_attribute, index));}}
\DoxyCodeLine{58 \textcolor{stringliteral}{            \}}}
\DoxyCodeLine{59 \textcolor{stringliteral}{            }\textcolor{keywordflow}{return} std::make\_shared<SetAngle>(\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle}{SetAngle}}(name\_attribute, maybe\_servo\_type.value(), \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}}));}
\DoxyCodeLine{60         \}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62         \textcolor{keyword}{const} \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997}{Status}} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_aa512ad55f0e2a839e323a55736f04e09}{run}}(\textcolor{keyword}{const} \textcolor{keywordtype}{int} tick\_count, std::shared\_ptr<Context> context) \textcolor{keyword}{final} \textcolor{keyword}{override}}
\DoxyCodeLine{63         \{}
\DoxyCodeLine{64 \textcolor{preprocessor}{\#ifndef BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{65             std::shared\_ptr<CarContext> car\_context = std::dynamic\_pointer\_cast<CarContext>(context);}
\DoxyCodeLine{66             \textcolor{keyword}{auto} car\_system = car\_context-\/>getCarSystem();}
\DoxyCodeLine{67             \textcolor{keyword}{const} MovementSystem *movement\_system = car\_system-\/>getMovementSystem();}
\DoxyCodeLine{68             \textcolor{keywordflow}{switch} (this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a62c344bc03ec0b2aa4b1c2a615a42a4f}{getServoType}}())}
\DoxyCodeLine{69             \{}
\DoxyCodeLine{70             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca93335b362c90016c279a0b085ec76f17}{ServoType::FrontWheels}}:}
\DoxyCodeLine{71                 movement\_system-\/>setFrontWheelsAngle(this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_afacfb3945a3539a52e8651bf411ab7dd}{getAngle}}());}
\DoxyCodeLine{72                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{73             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca89f9a720d0b6ba4a7076563014a54114}{ServoType::CameraServo1}}:}
\DoxyCodeLine{74                 movement\_system-\/>setCameraServo1Angle(this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_afacfb3945a3539a52e8651bf411ab7dd}{getAngle}}());}
\DoxyCodeLine{75                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{76             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca7a1697358e3c45b88123b709e9bd572f}{ServoType::CameraServo2}}:}
\DoxyCodeLine{77                 movement\_system-\/>setCameraServo2Angle(this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_afacfb3945a3539a52e8651bf411ab7dd}{getAngle}}());}
\DoxyCodeLine{78                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{79             \}}
\DoxyCodeLine{80 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !BEHAVIOUR\_TREE\_DISABLE\_RUN}}
\DoxyCodeLine{81             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997a505a83f220c02df2f85c3810cd9ceb38}{Status::Success}};}
\DoxyCodeLine{82         \}}
\DoxyCodeLine{83 }
\DoxyCodeLine{84         \textcolor{keyword}{const} std::string \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a040e1d1f21e04636a32a716215a354be}{toString}}() const final\textcolor{keyword}{ override}}
\DoxyCodeLine{85 \textcolor{keyword}{        }\{}
\DoxyCodeLine{86             std::string \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}};}
\DoxyCodeLine{87             \textcolor{keywordflow}{switch} (this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a62c344bc03ec0b2aa4b1c2a615a42a4f}{getServoType}}())}
\DoxyCodeLine{88             \{}
\DoxyCodeLine{89             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca93335b362c90016c279a0b085ec76f17}{ServoType::FrontWheels}}:}
\DoxyCodeLine{90                 servo\_type = \textcolor{stringliteral}{"{}FrontWheels"{}};}
\DoxyCodeLine{91                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{92             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca89f9a720d0b6ba4a7076563014a54114}{ServoType::CameraServo1}}:}
\DoxyCodeLine{93                 \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}} = \textcolor{stringliteral}{"{}CameraServo1"{}};}
\DoxyCodeLine{94                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{95             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efca7a1697358e3c45b88123b709e9bd572f}{ServoType::CameraServo2}}:}
\DoxyCodeLine{96                 \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}} = \textcolor{stringliteral}{"{}CameraServo2"{}};}
\DoxyCodeLine{97                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{98             \}}
\DoxyCodeLine{99             \textcolor{keyword}{const} std::string \&\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}} = this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_ad9b3324377c0a8e45bf05999664aa263}{getName}}();}
\DoxyCodeLine{100             \textcolor{keywordflow}{if} (name != \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{101                 \textcolor{keywordflow}{return} fmt::format(R\textcolor{stringliteral}{"{}(<Action:SetAngle name='\{\}' servo\_type='\{\}' angle='\{\}'/>)"{}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1Node_a24780ba4a95e7495222ead3390bddd35}{name}}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}}, this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_afacfb3945a3539a52e8651bf411ab7dd}{getAngle}}());}}
\DoxyCodeLine{102 \textcolor{stringliteral}{            }\textcolor{keywordflow}{else}}
\DoxyCodeLine{103                 \textcolor{keywordflow}{return} fmt::format(R\textcolor{stringliteral}{"{}(<Action:SetAngle servo\_type='\{\}' angle='\{\}'/>)"{}, \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}}, this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_afacfb3945a3539a52e8651bf411ab7dd}{getAngle}}());}}
\DoxyCodeLine{104 \textcolor{stringliteral}{        \}}}
\DoxyCodeLine{105 \textcolor{stringliteral}{}}
\DoxyCodeLine{106 \textcolor{stringliteral}{        }\textcolor{keyword}{const} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efc}{ServoType}} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a62c344bc03ec0b2aa4b1c2a615a42a4f}{getServoType}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{107 \textcolor{keyword}{        }\{}
\DoxyCodeLine{108             \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}};}
\DoxyCodeLine{109         \}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111         \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_afacfb3945a3539a52e8651bf411ab7dd}{getAngle}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{112 \textcolor{keyword}{        }\{}
\DoxyCodeLine{113             \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}};}
\DoxyCodeLine{114         \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{keyword}{private}:}
\DoxyCodeLine{117         \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_acfacda02115c20645d2ed65bc1e456b4}{angle}};}
\DoxyCodeLine{118         \textcolor{keyword}{const} \mbox{\hyperlink{namespacebehaviour__tree_1_1node_1_1custom_1_1action_a65c8aad958598237d6898a03ea191efc}{ServoType}} \mbox{\hyperlink{classbehaviour__tree_1_1node_1_1custom_1_1action_1_1SetAngle_a2e50e82a6ed7aef48f199737076782d6}{servo\_type}};}
\DoxyCodeLine{119     \};}
\DoxyCodeLine{120 \}}
\DoxyCodeLine{121 }
\DoxyCodeLine{122 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
