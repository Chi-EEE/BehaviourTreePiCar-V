\hypertarget{BehaviourTree_8hpp_source}{}\doxysection{Behaviour\+Tree.\+hpp}
\label{BehaviourTree_8hpp_source}\index{behaviour\_tree/include/behaviour\_tree/BehaviourTree.hpp@{behaviour\_tree/include/behaviour\_tree/BehaviourTree.hpp}}
\mbox{\hyperlink{BehaviourTree_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef BEHAVIOUR\_TREE\_HPP}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define BEHAVIOUR\_TREE\_HPP}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{comment}{/*}}
\DoxyCodeLine{7 \textcolor{comment}{XML format inspired by: https://github.com/telcy/modular-\/behavior-\/tree \& https://github.com/Defaultio/BehaviorTree3}}
\DoxyCodeLine{8 \textcolor{comment}{*/}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Root_8hpp}{Root.hpp}}"{}}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacebehaviour__tree}{behaviour\_tree}}}
\DoxyCodeLine{13 \{}
\DoxyCodeLine{14     \textcolor{keyword}{class }\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree}{BehaviourTree}}}
\DoxyCodeLine{15     \{}
\DoxyCodeLine{16     \textcolor{keyword}{public}:}
\DoxyCodeLine{17         \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a02677f666e740fefe9b0c778d367f782}{BehaviourTree}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a1d318cba29cb82c087a45b0cddedb979}{cycle\_limit}}, std::vector<std::shared\_ptr<Root>> \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a122d800eacfea947079f48c062d80a47}{roots}}) : \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a1d318cba29cb82c087a45b0cddedb979}{cycle\_limit}}(\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a1d318cba29cb82c087a45b0cddedb979}{cycle\_limit}}), \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a122d800eacfea947079f48c062d80a47}{roots}}(std::move(\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a122d800eacfea947079f48c062d80a47}{roots}}))}
\DoxyCodeLine{18         \{}
\DoxyCodeLine{19         \}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21         \textcolor{keywordtype}{void} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_ae27d24c4c1f122aad9110fa70a75d518}{start}}()}
\DoxyCodeLine{22         \{}
\DoxyCodeLine{23             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& root : this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a122d800eacfea947079f48c062d80a47}{roots}})}
\DoxyCodeLine{24             \{}
\DoxyCodeLine{25                 \textcolor{keywordflow}{if} (root-\/>getId() == \textcolor{stringliteral}{"{}Main"{}})}
\DoxyCodeLine{26                 \{}
\DoxyCodeLine{27                     this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a79e3a407412a9ee8df4965a533427378}{root\_to\_use}} = root;}
\DoxyCodeLine{28                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{29                 \}}
\DoxyCodeLine{30             \}}
\DoxyCodeLine{31             this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a79e3a407412a9ee8df4965a533427378}{root\_to\_use}} = this-\/>roots[0];}
\DoxyCodeLine{32         \}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34         \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997}{Status}} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_ab884c7303547b1551fc08af95f898635}{tick}}(\textcolor{keyword}{const} \textcolor{keywordtype}{int} tick\_count, std::shared\_ptr<Context> context)}
\DoxyCodeLine{35         \{}
\DoxyCodeLine{36             \textcolor{keyword}{const} \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997}{Status}} status = this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a79e3a407412a9ee8df4965a533427378}{root\_to\_use}}-\/>tick(tick\_count, context);}
\DoxyCodeLine{37             \textcolor{keywordflow}{if} (status != \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997a5bda814c4aedb126839228f1a3d92f09}{Status::Running}})}
\DoxyCodeLine{38             \{}
\DoxyCodeLine{39                 this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_afc2927e22b6aac3162d37723aac2a7ac}{cycles}}++;}
\DoxyCodeLine{40             \}}
\DoxyCodeLine{41             \textcolor{keywordflow}{return} status;}
\DoxyCodeLine{42         \}}
\DoxyCodeLine{43 }
\DoxyCodeLine{44         \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997}{Status}} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_ada7dc70a82579c6ba81e7635b4eba4e5}{UseRoot}}(\textcolor{keyword}{const} \textcolor{keywordtype}{int} tick\_count, std::shared\_ptr<Context> context, \textcolor{keyword}{const} std::string\& \textcolor{keywordtype}{id}) \{}
\DoxyCodeLine{45             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& root : this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a122d800eacfea947079f48c062d80a47}{roots}})}
\DoxyCodeLine{46             \{}
\DoxyCodeLine{47                 \textcolor{keywordflow}{if} (root-\/>getId() == \textcolor{keywordtype}{id})}
\DoxyCodeLine{48                 \{}
\DoxyCodeLine{49                     \textcolor{keywordflow}{return} root-\/>tick(tick\_count, context);}
\DoxyCodeLine{50                 \}}
\DoxyCodeLine{51             \}}
\DoxyCodeLine{52             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacebehaviour__tree_acc43ccc4dd130eee1c630b2acc709997ae139a585510a502bbf1841cf589f5086}{Status::Failure}};}
\DoxyCodeLine{53         \}}
\DoxyCodeLine{54 }
\DoxyCodeLine{55         \textcolor{keywordtype}{bool} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a386e85f2f3a2c0243ee6404735d4b801}{canRun}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{56             \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a1d318cba29cb82c087a45b0cddedb979}{cycle\_limit}} <= 0)}
\DoxyCodeLine{57             \{}
\DoxyCodeLine{58                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{59             \}}
\DoxyCodeLine{60             \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_afc2927e22b6aac3162d37723aac2a7ac}{cycles}} < this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a1d318cba29cb82c087a45b0cddedb979}{cycle\_limit}};}
\DoxyCodeLine{61         \}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63         \textcolor{keywordtype}{void} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a94ed9690ada8dc4a2b51a64390ec6a63}{incrementCycle}}() \{}
\DoxyCodeLine{64             this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_afc2927e22b6aac3162d37723aac2a7ac}{cycles}}++;}
\DoxyCodeLine{65         \}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67         \textcolor{keywordtype}{void} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a50c069599ac4ce73eee3ec20741feb63}{resetCycles}}() \{}
\DoxyCodeLine{68             this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_afc2927e22b6aac3162d37723aac2a7ac}{cycles}} = 0;}
\DoxyCodeLine{69         \}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71         \textcolor{keyword}{const} std::string \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a3abe45585ebd050298dd248ffd33ad88}{toString}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{72             std::string out;}
\DoxyCodeLine{73             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& root : this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a122d800eacfea947079f48c062d80a47}{roots}})}
\DoxyCodeLine{74             \{}
\DoxyCodeLine{75                 out += root-\/>toString();}
\DoxyCodeLine{76             \}}
\DoxyCodeLine{77             \textcolor{keywordflow}{return} fmt::format(R\textcolor{stringliteral}{"{}(<BehaviourTree cycle\_limit='\{\}'>\{\}</BehaviourTree>)"{}, this-\/>\mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a1d318cba29cb82c087a45b0cddedb979}{cycle\_limit}}, out);}}
\DoxyCodeLine{78 \textcolor{stringliteral}{        \}}}
\DoxyCodeLine{79 \textcolor{stringliteral}{}}
\DoxyCodeLine{80 \textcolor{stringliteral}{    }\textcolor{keyword}{private}:}
\DoxyCodeLine{81         \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_afc2927e22b6aac3162d37723aac2a7ac}{cycles}} = 0;}
\DoxyCodeLine{82         std::shared\_ptr<Root> \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a79e3a407412a9ee8df4965a533427378}{root\_to\_use}};}
\DoxyCodeLine{83 }
\DoxyCodeLine{84         \textcolor{keyword}{const} std::vector<std::shared\_ptr<Root>> \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a122d800eacfea947079f48c062d80a47}{roots}};}
\DoxyCodeLine{85         \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{classbehaviour__tree_1_1BehaviourTree_a1d318cba29cb82c087a45b0cddedb979}{cycle\_limit}};}
\DoxyCodeLine{86     \};}
\DoxyCodeLine{87 \}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
